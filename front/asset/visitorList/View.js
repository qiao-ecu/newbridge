define(function(require,exports,module){function e(){t.apply(this,arguments)}var t=require("ef/UIView"),n=require("er/util"),i=require("underscore");return require("tpl!./main.tpl"),require("common/esuix/VisitorList"),e.prototype.template="visitorList",e.prototype.uiProperties={visitor:{indexKey:"bid"}},e.prototype.changeIconStatus=function(){var e=require("./main"),t=this.get("visitor"),n=t.get("selectedType"),i=t.get("selectedData"),r=[!0,!0,!0,!0,!0];switch(n){case"waiting":r=[!0,!0,!0,!0,!0];break;case"talking":r=[!0,!0,!1,!0,!0];break;case"inviting":r=[!0,!0,!0,!0,!0];break;case"recent":r=[!0,!0,!0,!0,!0];break;case"visiting":r=[!1,!1,!0,!0,!0];break;case"robot":r=[!0,!0,!0,!0,!0];break;case"leave":r=[!0,!0,!0,!0,!0]}e.disable("inviteIcon",r.shift()),e.disable("forceTalkIcon",r.shift()),e.disable("killIcon",r.shift()),e.disable("transferIcon",r.shift()),e.disable("blockIcon",r.shift()),i&&e.disable("blockIcon",!!i.block)},e.prototype.uiEvents={visitor:{select:function(e){this.changeIconStatus()}}},e.prototype.enterDocument=function(){t.prototype.enterDocument.call(this,arguments);for(var e=this.model,n=this.get("visitor"),r=["visitList","chatList","queueList","inviteList","robotList","recentList","leftList"],a=["visiting","talking","waiting","inviting","robot","recent","leave"],o=0;o<r.length;o++)i.map(e.get(r[o]),function(e){e.type=a[o],n.add(e)})},n.inherits(e,t),e});
define(function(require){function e(e){var t=e.message,n=/\[(.+)(:?\s+(.+))*\]/g.exec(t);if(n)return{cmd:n[1],param:n[2]};else return void 0}function t(){return n.getLastCommit().then(function(t){var n=e(t);if(n&&i[n.cmd])return console.log("执行command "+n.cmd),i[n.cmd](n.param);else return console.log("没有命令，执行默认升级操作"),i.update()})}var n=require("./git"),i=(require("jquery"),{});return i.update=function(){return console.log("升级"),n.checkout()},i.revert=function(e){return console.log("回滚至"+e),n.checkout("HEAD",e)},{run:t}});
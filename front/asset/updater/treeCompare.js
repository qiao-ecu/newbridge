define(function(require){var exports={},e=window.require,t=e("js-git/lib/modes");return exports.compare=function(e,n,i){e=e||{},n=n||{},i=i||{};require("./walker");i.addBlob=i.addBlob||[],i.addTree=i.addTree||[],i.removeBlob=i.removeBlob||[],i.removeTree=i.removeTree||[],i.modifyBlob=i.modifyBlob||[],i.modifyTree=i.modifyTree||[],i.path=i.path||"";for(var r=i.addBlob,a=i.addTree,o=i.removeBlob,s=i.removeTree,l=i.modifyBlob,u=i.modifyTree,d=Object.keys(e).sort(),c=Object.keys(n).sort(),f=d[0],h=c[0],p=0,m=0;f||h;){var g=e[f],v=n[h];if(g)g.path=i.path+f;if(v)v.path=i.path+h;if(f===h){if(g.mode!==v.mode)if(v.mode===t.tree)o.push(g),a.push(v);else s.push(g),r.push(v);if(g.hash!==v.hash)if(v.mode===t.blob)l.push({from:g,to:v});else u.push({from:g,to:v});p++,m++}else if(!h||f&&h>f){if(g.mode===t.tree)s.push(g);else o.push(g);p++}else if(!f||h&&f>h){if(v.mode===t.tree)a.push(v);else r.push(v);m++}f=d[p],h=c[m]}return i},exports});
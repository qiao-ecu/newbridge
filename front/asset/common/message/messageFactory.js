define(function(require){function e(e){var t=!1;switch(e.type){case 0:if("string"==typeof e.content)t=!0;break;case 99:if("string"==typeof e.content)t=!0}if(t)return s(e);else return o("unsupport message")}function t(e,t){t=t||"default",n[t]=n[t]||{};var a=n[t];if(a[e.id])return s(a[e.id]);var l=null;switch(e.type){case 0:l=new i(e);break;case 99:l=new r(e);break;default:l=null}if(l&&e.id)a[e.id]=l;if(l)return s(l);else return o("unsupport message")}var exports={},n={},i=require("./TextMessage"),r=require("./SystemMessage"),a=require("eff"),o=a.Either.Left,s=a.Either.Right,l=a.Monad.mApply,u=a.util.curry2;return exports.checkWhiteList=e,exports.get=function(n,i){var r=l(e,s(n)),a=u(t)(i);return l(a,r)},exports.update=function(e){e=e||{};for(var t in n){var i=n[t];if(i){var r=i[e.id];if(r)r.setData(e),r.render()}else;}},exports.clear=function(e){e=e||"default",n[e]={}},exports});
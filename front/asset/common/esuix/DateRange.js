define(function(require){function e(e){a.apply(this,arguments)}function t(e){return e=new Date(e),e=u(e).format("YYYY-MM-DD")}function n(e){return function(t){var n=(e.main,t.target);l(".ui-range").removeClass("current-tab"),l(n).addClass("current-tab"),e.fire("activate")}}var i=require("underscore"),r=require("esui/lib"),a=(require("esui/painters"),require("esui/Control")),o=new Date,s=o.getDate(),l=require("jquery"),u=require("moment");return e.prototype={type:"DateRange",initOptions:function(e){if(e.rangeOption)for(var n=e.rangeOption,r=0,a=n.length;a>r;r++){var l=n[r];l.begin=t(l.begin),l.end=t(l.end)}var u={rangeOption:[{text:"今天",begin:t(o),end:t(o)},{text:"昨日",begin:t((new Date).setDate(s-1)),end:t((new Date).setDate(s-1))},{text:"最近7天",begin:t((new Date).setDate(s-6)),end:t(o)},{text:"最近30天",begin:t((new Date).setDate(s-30)),end:t(o)}],disabled:!1};i.extend(u,e),u.tagName=this.main.nodeName.toLowerCase(),this.setProperties(u)},initStructure:function(){for(var e="",t=this.rangeOption,n=0,i=t.length;i>n;n++){var r=t[n],a='<div class="ui-range" data-begin="'+r.begin+'" data-end="'+r.end+'">'+r.text+"</div>";e+=a}this.main.innerHTML=e}},e.prototype.initEvents=function(){this.helper.addDOMEvent(this.main,"click",n(this))},e.prototype.getValue=function(){var e=l(this.main).find(".current-tab");if(e.length)return{begin:e.attr("data-begin"),end:e.attr("data-end")};else return void 0},e.prototype.setSelect=function(e){l(".ui-range").removeClass("current-tab"),l(".ui-range").eq(e-1).addClass("current-tab")},e.prototype.removeSelect=function(){l(".ui-range").removeClass("current-tab")},r.inherits(e,a),require("esui/main").register(e),e});
define(function(require){function e(e){var t;if(this.orientation==o.HORIZONTAL)t=this.min+e.left*(this.max-this.min);else t=this.min+e.top*(this.max-this.min);if(this.setValue(t))this.fire("change",{value:this.value});return!1}function t(e){r.call(this,e)}var n=require("esui/lib"),i=require("esui/controlHelper"),r=require("esui/Control"),a=require("./drag"),o={VERTICAL:"vertical",HORIZONTAL:"horizontal"};return t.ORIENTATION=o,t.prototype.type="Scroll",t.prototype.initOptions=function(e){if(e.value=isNaN(+e.value)?0:+e.value,e.max=isNaN(+e.max)?100:+e.max,e.min=isNaN(+e.min)?0:+e.min,e.orientation=e.orientation||o.HORIZONTAL,e.orientation==o.VERTICAL)this.addState("vertical");r.prototype.initOptions.call(this,e)},t.prototype.initStructure=function(){var t=this.main;t.innerHTML='<div class="'+i.getPartClasses(this,"range")+'"><div class="'+i.getPartClasses(this,"progress")+'"></div><span id="'+i.getId(this,"bar")+'" class="'+i.getPartClasses(this,"bar")+'"></span><div class="'+i.getPartClasses(this,"tip")+'"></div></div>',this._eProgress=t.firstChild.firstChild;var r=n.dom.next(this._eProgress);this._eTip=n.dom.next(r),a(this,r,{ondragmove:e})},t.prototype.setValue=function(e){var t=!0;if(e=Math.round(+e),e<this.min)e=this.min;else if(e>this.max)e=this.max;if(this.value===e)t=!1;else this.setProperties({value:e});return t},t.prototype.getValue=function(){return this.value},t.prototype.repaint=i.createRepaint(r.prototype.repaint,[{name:"value",paint:function(e,t){var r=n.g(i.getId(e,"bar"));if(t=(t-e.min)/(e.max-e.min)*100,!(isNaN(t)||0>t))if(e.orientation==o.HORIZONTAL)r.style.left=t+"%",e._eProgress.style.width=t+"%";else r.style.top=t+"%",e._eProgress.style.height=t+"%"}}]),n.inherits(t,r),require("esui").register(t),t});
define(function(){var e,t,n,i,r,a,o,s,l,u,exports={};exports.bindEvent=function(e,d){d.domOn(n,"click",function(e){exports.toggleFontBar(),d.domStop(e)}),d.domOn(t,"click",function(e){exports.hasOperation(),d.domStop(e)}),d.domOn(i,"change",function(e){e=e||window.event;var t=e.target||e.srcElement,n=t.value;exports.fontFamilyChange(n)}),d.domOn(r,"change",function(e){e=e||window.event;var t=e.target||e.srcElement,n=t.value;exports.fontSizeChange(n)}),d.domOn(a,"click",function(e){exports.toggleBold()}),d.domOn(o,"click",function(e){exports.toggleItalic()}),d.domOn(s,"click",function(e){exports.toggleUnderline()}),d.domOn(l,"click",function(e){exports.toggleColor(),d.domStop(e)}),d.domOn(u,"click",function(e){e=e||window.event;var t=e.target||e.srcElement,n=t.getAttribute("data-color");if(n)exports.colorSelected(n)})},exports.fontFamilyChange=function(e){},exports.fontSizeChange=function(e){},exports.hasOperation=function(){};var d="nb-webim-light-color-select";exports.colorSelected=function(e,t,n){for(var i=u.getElementsByTagName("li"),r=0;r<t.length;r++)if(e.removeClass(i[r],d),t[r]===n)e.addClass(i[r],d)},exports.showFontBar=function(e,i){var r=i.getInstance();if(r.isBold())exports.setBold();else exports.clearBold();if(r.isItalic())exports.setItalic();else exports.clearItalic();if(r.isUnderline())exports.setUnderline();else exports.clearUnderline();t.style.display="block",e.addClass(n,"nb-webim-light-font-bar-show")},exports.hideFontBar=function(e){t.style.display="none",e.removeClass(n,"nb-webim-light-font-bar-show"),exports.hideColor()},exports.toggleFontBar=function(){if(t.offsetHeight)exports.hideFontBar();else exports.showFontBar()};var c="nb-webim-light-font-bold-selected";exports.setBold=function(e){e.addClass(a,c)},exports.clearBold=function(e){e.removeClass(a,c)},exports.toggleBold=function(e){if(e.hasClass(a,c))exports.clearBold();else exports.setBold()};var f="nb-webim-light-font-italic-selected";exports.setItalic=function(e){e.addClass(o,f)},exports.clearItalic=function(e){e.removeClass(o,f)},exports.toggleItalic=function(e){if(e.hasClass(o,f))exports.clearItalic();else exports.setItalic()};var h="nb-webim-light-font-underline-selected";return exports.setUnderline=function(e){e.addClass(s,h)},exports.clearUnderline=function(e){e.removeClass(s,h)},exports.toggleUnderline=function(e){if(e.hasClass(s,h))exports.clearUnderline();else exports.setUnderline()},exports.showColor=function(e,t){var n=t.getInstance(),i=n.getStyles();exports.colorSelected(i.color),u.style.display="block"},exports.hideColor=function(){u.style.display="none"},exports.toggleColor=function(){if(u.offsetHeight)exports.hideColor();else exports.showColor()},exports.render=function(d,c,f,h){for(var p=[],m=d.get("colorItem"),g=0;g<h.length;g++)p.push(c.format(m,{color:h[g]}));f.appendHTML(c.format(d.get("font"),{colorItems:p.join("")}),e),n=f.g("nbwlFontIcon"),t=f.g("nbwlFontContainer"),i=f.g("nbwlFontFamily"),r=f.g("nbwlFontSize"),a=f.g("nbwlFontBold"),o=f.g("nbwlFontItalic"),s=f.g("nbwlFontUnderline"),l=f.g("nbwlFontColor"),u=f.g("nbwlColorContainer"),exports.colorSelected(h[0])},exports.init=function(t,n,i){e=t.g("nbwlToolBar"),n.parse(i),exports.render(),exports.bindEvent()},exports});
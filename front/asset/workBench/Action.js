define(function(require){function e(e,t){this.modelType=e,this.viewType=t,i.apply(this,arguments)}var t=require("underscore"),n=require("er/util"),i=require("er/Action"),r=requireNode("client-vm")();return e.prototype.initBehavior=function(){function e(e){var i=e.name+","+e.subViewName+","+e.dynamicViewName;if("vm:user,info,info"===i)t.map(e.value,function(e){if(3===e.status)n.showToast("您已掉线,暂时无法接待访客");else if(99===e.status)n.showToast("您的账号已在其他客户端上登录");else n.hideToast()})}var n=this.view;r.on("data",e),this.on("leave",function(){r.removeListener("data",e)}),this.on("switched",function(){setTimeout(function(){n.showWindow()},700)})},n.inherits(e,i),e});
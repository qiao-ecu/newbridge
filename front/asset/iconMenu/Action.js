define(function(require){function e(e,t){function r(e){var t=a.view;if(t){var n=e.name+", "+e.subViewName+", "+e.dynamicViewName;if("vm:notify, bookInitCnt, bookInitCnt"===n){var i=e.value[0]||0;t.leaveMessageIcon.set("notification",i)}}}var a=this;this.modelType=e,this.viewType=t,i.on("data",r),this.on("leave",function(){i.removeListener("data",r)}),n.apply(this,arguments)}var t=require("er/util"),n=require("er/Action"),i=requireNode("client-vm")();require("underscore");return t.inherits(e,n),e});
define(function(require){function e(e,t,o){var r=t.split(".");r[1]="*";var i=[],u=n;u=u[e]||{},u=u[t]||{},u=u[o]||[];for(var a=0;a<u.length;a++)i.push(u[a]);var u=n;u=u[e]||{},u=u[t]||{},u=u["*"]||[];for(var a=0;a<u.length;a++)if(u[a].modName!==t&&u[a].funcName!==o)i.push(u[a]);var u=n;u=u[e]||{},u=u[r.join(".")]||{},u=u["*"]||[];for(var a=0;a<u.length;a++)if(u[a].modName!==t&&u[a].funcName!==o)i.push(u[a]);var u=n;u=u[e]||{},u=u["*.*"]||{},u=u["*"]||[];for(var a=0;a<u.length;a++)if(u[a].modName!==t&&u[a].funcName!==o)i.push(u[a]);return i}var exports={},n={};return exports.on=function(e,t,o,r){var i=n;i[e]=i[e]||{},i=i[e],i[t]=i[t]||{},i=i[t],i[o]=i[o]||[],i=i[o],i.push({func:r.func,funcName:r.funcName,modName:r.modName})},exports.getBefore=function(n,t){var o=require("./main"),r=o.TypeEnum.BEFORE;return e(r,n,t)},exports.queryBefore=function(e,n){var t=exports.getBefore();if(console.log("method before "+e+" -> "+n+":"),!t.length)return void console.log("none");for(var o=0;o<t.length;o++)console.log(t[o].modName+" -> "+t[o].funcName);console.log("-----------------------------------")},exports.getAfter=function(n,t){var o=require("./main"),r=o.TypeEnum.AFTER;return e(r,n,t)},exports.queryAfter=function(e,n){var t=exports.getAfter();if(!t.length)return void console.log("none");console.log("method after "+e+" -> "+n+":");for(var o=0;o<t.length;o++)console.log(t[o].modName+" -> "+t[o].funcName);console.log("-----------------------------------")},exports.getRegisterAop=function(e){var t={},o=[],r=n[e];for(var i in r)if(r.hasOwnProperty(i)){var u=r[i];for(var a in u)if(u.hasOwnProperty(a)){if(!t[a])t[a]=!0,o.push({modName:i,funcName:a,from:u[a][0].modName})}}return o},exports.emit=function(n,t,o,r){for(var i=e(n,t,o),u=0;u<i.length;u++)if(i[u]&&i[u].func)i[u].func(r)},exports});
define(function(require){function e(e){var t=e.styleType||e.type;return t.toLowerCase()}function t(){return[].slice.call(arguments,0).join("-")}var i=require("underscore"),n=require("../lib"),r=require("../main"),a={};a.getPartClasses=function(i){if(i&&this.partClassCache&&this.partClassCache.hasOwnProperty(i))return this.partClassCache[i].slice();var n=e(this.control),a=this.control.skin,o=r.getConfig("uiClassPrefix"),s=r.getConfig("skinClassPrefix"),l=[];if(i){if(l.push(t(o,n,i)),a)l.push(t(s,a,n,i));if(!this.partClassCache)this.partClassCache={},this.partClassCache[i]=l.slice()}else if(l.push(t(o,"ctrl")),l.push(t(o,n)),a)l.push(t(s,a),t(s,a,n));return l},a.getPartClassName=function(e){return this.getPartClasses(e).join(" ")},a.getPrimaryClassName=function(i){var n=e(this.control);if(i)return t(r.getConfig("uiClassPrefix"),n,i);else return t(r.getConfig("uiClassPrefix"),n)},a.addPartClasses=function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main)n.addClasses(t,this.getPartClasses(e))},a.removePartClasses=function(e,t){if("string"==typeof t)t=this.getPart(t);if(t=t||this.control.main)n.removeClasses(t,this.getPartClasses(e))},a.getStateClasses=function(i){if(this.stateClassCache&&this.stateClassCache.hasOwnProperty(i))return this.stateClassCache[i].slice();var n=e(this.control),a=r.getConfig,o=[t(a("uiClassPrefix"),n,i),t(a("stateClassPrefix"),i)],s=this.control.skin;if(s){var l=a("skinClassPrefix");o.push(t(l,s,i),t(l,s,n,i))}if(!this.stateClassCache)this.stateClassCache={},this.stateClassCache[i]=o.slice();return o},a.addStateClasses=function(e){var t=this.control.main;if(t)n.addClasses(t,this.getStateClasses(e))},a.removeStateClasses=function(e){var t=this.control.main;if(t)n.removeClasses(t,this.getStateClasses(e))},a.getId=function(e){if(e=e?"-"+e:"",!this.control.domIDPrefix)this.control.domIDPrefix=this.control.viewContext&&this.control.viewContext.id;var t=this.control.domIDPrefix?this.control.domIDPrefix+"-":"";return"ctrl-"+t+this.control.id+e},a.createPart=function(e,t){t=t||"div";var i=document.createElement(t);return i.id=this.getId(e),this.addPartClasses(e,i),i},a.getPart=function(e){return n.g(this.getId(e))},a.isPart=function(e,t){var i=this.getPartClasses(t)[0];return n.hasClass(e,i)};var o={type:!0,name:!0,alt:!0,autocomplete:!0,autofocus:!0,checked:!0,dirname:!0,disabled:!0,form:!0,formaction:!0,formenctype:!0,formmethod:!0,formnovalidate:!0,formtarget:!0,width:!0,height:!0,inputmode:!0,list:!0,max:!0,maxlength:!0,min:!0,minlength:!0,multiple:!0,pattern:!0,placeholder:!0,readonly:!0,required:!0,size:!0,src:!0,step:!0,value:!0};a.replaceMain=function(e){e=e||this.control.createMain();var t=this.control.main;t.setAttribute(r.getConfig("instanceAttr"),n.getGUID());for(var i=t.attributes,a=0;a<i.length;a++){var s=i[a],l=s.name;if(n.hasAttribute(t,l)&&!o.hasOwnProperty(l))n.setAttribute(e,l,s.value)}return n.insertBefore(e,t),t.parentNode.removeChild(t),this.control.main=e,t};var s={name:{name:"name"},maxlength:{name:"maxLength",type:"number"},required:{name:"required",type:"boolean"},pattern:{name:"pattern"},min:{name:"min",type:"number"},max:{name:"max",type:"number"},autofocus:{name:"autoFocus",type:"boolean"},disabled:{name:"disabled",type:"boolean"},readonly:{name:"readOnly",type:"boolean"}};return a.extractOptionsFromInput=function(e,t){var r={};if(i.each(s,function(t,i){var a=n.hasAttribute(e,i);if(a){var o=n.getAttribute(e,i);switch(t.type){case"boolean":o=a;break;case"number":o=parseInt(o,10)}r[t.name]=o}}),n.hasAttribute(e,"value")||"select"!==e.nodeName.toLowerCase()&&e.value)r.value=e.value;return i.defaults(t||{},r)},a});
define(function(require){var e=require("underscore"),t={id:function(e,t){return t.helper.getId(e)},"class":function(e,t){return t.helper.getPartClassName(e)},part:function(e,t,i){return i.helper.getPartHTML(e,t)}},i={};return i.setTemplateEngine=function(e){if(this.templateEngine=e,!e.esui)this.initializeTemplateEngineExtension()},i.initializeTemplateEngineExtension=function(){e.each(t,function(e,t){this.addFilter(t,e)},this.templateEngine)},i.renderTemplate=function(e,i){var n=this;i=i||{};var r={get:function(e){if("instance"===e)return n.control;if("function"==typeof i.get)return i.get(e);var r=e,a=null,o=e.lastIndexOf(".");if(o>=0){r=e.substring(0,o);var s=e.substring(o+1);if(s&&t.hasOwnProperty(s))a=t[s]}var l=i.hasOwnProperty(r)?i[r]:r;if(a)l=a(l,n.control);return l}};if(!this.templateEngine)throw new Error("No template engine attached to this control");return this.templateEngine.render(e,r)},i});
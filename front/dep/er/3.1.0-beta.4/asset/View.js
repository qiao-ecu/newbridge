define(function(require){function e(){this.initialize()}var t=require("./util"),n=require("mini-event/EventTarget");return e.prototype.initialize=t.noop,e.prototype.template="",e.prototype.getTemplateName=function(){return this.template||""},e.prototype.model=null,e.prototype.container="",e.prototype.getContainerElement=function(){return t.getElement(this.container)||null},e.prototype.getTemplateData=function(){var e=this.model;if(e&&"function"!=typeof e.get){var t=require("./Model");e=new t(e)}var n=function(t){for(var n=t.replace(/\[(\d+)\]/g,".$1").split("."),r=n.shift(),i=e.get(r);i&&(r=n.shift());)i=i[r];return i};return{get:n,relatedModel:e}},e.prototype.render=function(){var e=this.getContainerElement();if(!e){var t=this.model&&"function"==typeof this.model.get&&this.model.get("url");throw new Error("Container not found when rendering "+(t?'"'+t+'"':"view"))}var n=require("etpl"),r=n.render(this.getTemplateName(),this.getTemplateData());e.innerHTML=r,this.enterDocument()},e.prototype.enterDocument=require("./util").noop,e.prototype.dispose=function(){var e=this.getContainerElement();e&&(e.innerHTML="")},require("./util").inherits(e,n),e});
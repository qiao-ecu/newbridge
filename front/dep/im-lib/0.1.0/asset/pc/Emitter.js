define(function(){function e(){}var t=e.prototype;return t._getEvents=function(){if(!this._events)this._events={};return this._events},t._getMaxListeners=function(){if(isNaN(this.maxListeners))this.maxListeners=10;return this.maxListeners},t.on=function(e,t){var i=this._getEvents(),n=this._getMaxListeners();i[e]=i[e]||[];var r=i[e].length;if(r>=n&&0!==n)throw new RangeError("Warning: possible Emitter memory leak detected. "+r+" listeners added.");return i[e].push(t),this},t.once=function(e,t){function i(){n.off(e,i),t.apply(this,arguments)}var n=this;return i.listener=t,this.on(e,i),this},t.off=function(e,t){var i=this._getEvents();if(0===arguments.length)return this._events={},this;var n=i[e];if(!n)return this;if(1===arguments.length)return delete i[e],this;for(var r,a=0;a<n.length;a++)if(r=n[a],r===t||r.listener===t){n.splice(a,1);break}return this},t.emit=function(e){var t=this._getEvents(),i=t[e],n=Array.prototype.slice.call(arguments,1);if(i){i=i.slice(0);for(var r=0,a=i.length;a>r;r++)i[r].apply(this,n)}return this},t.listeners=function(e){var t=this._getEvents();return t[e]||[]},t.setMaxListeners=function(e){return this.maxListeners=e,this},e.mixin=function(t){for(var i in e.prototype)t[i]=e.prototype[i];return t},e});
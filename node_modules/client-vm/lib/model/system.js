function System(e){this.name=e}var Emitter=require("events").EventEmitter,inherits=require("util").inherits,rimraf=require("rimraf"),consts=require("../utils/const"),log=require("../utils/log")("system");inherits(System,Emitter),System.prototype._handleDelete=function(e){var t=consts.UTILS_DATA_DIR(e);rimraf(t,function(t){if(t)log.error("Error occurred when try to delete user data files %s %s",e,JSON.stringify(t))})};var singtonSystem;module.exports=function(e){if(singtonSystem)return singtonSystem;else return singtonSystem=new System("vm:system"),log.info("Created a system view model instance with %s, and keep it only one.",JSON.stringify(e)),singtonSystem.on(consts.EVENT_ACTION_PREFIX+"delete",function(e){if("user"==e.subViewName||"user"==e.dynamicViewName)singtonSystem._handleDelete(e.id)}),singtonSystem};
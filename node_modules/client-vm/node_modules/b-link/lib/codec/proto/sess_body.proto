import "cg_types.proto";

package sess;

message MsgBody {
    enum OprType {
        CSR = 0;
        VISITOR = 1;
        CONSULT = 2;
        CSRS = 3;
        IR = 4;
        SYS = 5;
    }

    enum MediaType {
        HTML = 0;
        FILE = 1;
        VOICE = 2;
        VIDEO = 3;
        OTHER = 4;
    }

    enum PushType {
        NOPUSH = 0;
        PUSH_ONE_NATIVE = 1; //�����Ƹ���
        PUSH_ONE_LIGHT = 2; //�����Ƹ���Ӧ��
    }

    message Content {
        required MediaType type = 1;
        required string content = 2;
        optional fixed64 timestamp = 3;
    }

    message Device {
        //native�豸���ز���
        optional fixed32 type = 1;  	// �豸����
        optional string mid = 2;  		// �û���ʶ���Ƹ�nativeʱ��Android�mchannelid + midָ��ĳһ���ض��û����Ƹ���Ӧ��ʱ���ֶ�Ϊpush_token
        optional string mchannelid = 3;  // ͨ����ʶ
        //��Ӧ���豸���ز���
        optional string pushtoken = 4; //��Ӧ���û���ʶ
    }

    message LightAppInfo
    {
        required string accesstoken = 1;  // token
        required string title       = 2;  // ��Ϣ����
        required string abstract    = 3;  // ��Ϣ����
        required string url         = 4;  // ��Ϣ����
    }

    required cg.User from = 1;
    required OprType fromtype = 2;
    required cg.User to = 3;
    optional OprType totype = 4;
    required fixed64 siteid = 5;
    optional string sessionid = 6;
    optional string reason = 7;
    required fixed32 eid = 8;
    repeated Content content = 9;
    optional PushType push = 10;
    repeated Device device = 11;
    optional LightAppInfo info = 12;//���͸���Ӧ��ʱ��Ҫ���ֶ�
    optional string sinfo = 13; //͸����ҵ����Ϣ
    optional string inviterefer = 14; //�ÿͷ�����ͨ��ҳ��    
    optional string adata = 18;
}

message PickQueue {
	required cg.User csr = 1;
	required fixed32 eid  = 2;//�ͷ�eid
	optional cg.User vst = 3;
    optional fixed32 siteid = 4;
	optional string sessionid = 5;
    optional string reason = 6;
}

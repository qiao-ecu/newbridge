b-link
===

b-link 的 node 客户端

__注：__ 只支持 node 0.12 以上版本

## API

* [Class](#class)
* [Events](#events)

### Class

#### new Core(options)

创建 b-link 客户端

* **options** `{Object}` 配置参数
* **options.string** `{string=}` 服务器地址 默认为 `10.36.158.24`
* **options.port** `{number=}` 服务端口号 默认为`8530`
* **options.id** `{string}` 用户id
* **options.eid** `{number}` 企业id
* **options.logDir** `{string=}` 日志目录 默认为进程工作目录下的 `log` 目录中
* **options.debug** `{boolean=}` 是否开启debug模式，默认为`false`，debug模式下有完整的日志纪录

#### core.login(username, pwd)

登录沟通平台

* **username** `{string}` 用户名
* **pwd** `{string}` 密码
* _return_ `{Promise}` 如果成功返回用户的基本信息，失败返回错误信息

#### core.logout()

登出沟通平台

* _return_ `{Promise}`

#### core.getContactsList()

获取联系人列表

* _return_ `{Promise}` 如果成功返回联系人列表，如果失败返回错误信息

#### core.send(id, type, content)

发送消息

* **id** `{string}` 发送对象的id
* **type** `{number}` 消息类型
* **content** `{*}` 消息内容
* _return_ `{Promise}` 如果失败会返回错误信息

#### core.getUserInfo()

获取当前登录者信息

* _return_ `{Object}` 包含 `id`、`eid`、`nickname` 与 `token` 等信息

### Events

#### enter

访客进站事件

* **info** `{Object}` 访客信息

#### chat

访客主动发起沟通

* **id** `{string}` 访客id
* **content** `{Array<Object>}` 访客发送的信息

#### chatover

访客主动结束沟通

* **id** `{string}` 访客id

#### message

收到消息

* **id** `{string}` 访客id
* **content** `{Array<Object>}` 访客发送的信息

#### leave

访客已离开

* **id** `{string}` 访客id
